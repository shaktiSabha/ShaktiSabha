(()=>{var e={};e.id=3898,e.ids=[3898],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65794:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>p,serverHooks:()=>h,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>l});var a=r(42706),i=r(28203),o=r(45994),n=r(39187),u=r(37236),d=r(17745);async function c(e){try{await (0,u.A)();let{searchParams:t}=new URL(e.url),r=t.get("category"),s=t.get("status"),a=t.get("featured"),i=parseInt(t.get("limit")||"0"),o={};r&&"All"!==r&&(o.category=r),s&&"all"!==s?o.status=s:s||(o.status="published"),"true"===a&&(o.featured=!0);let c=d.A.find(o).sort({createdAt:-1});i>0&&(c=c.limit(i));let l=await c.exec();return n.NextResponse.json({success:!0,data:l,count:l.length})}catch(e){return console.error("Error fetching media:",e),n.NextResponse.json({success:!1,error:"Failed to fetch media"},{status:500})}}async function l(e){try{await (0,u.A)();let{title:t,description:r,embedUrl:s,category:a,status:i,featured:o,thumbnailUrl:c,duration:l}=await e.json();if(!t||!s||!a)return n.NextResponse.json({success:!1,error:"Title, embed URL, and category are required"},{status:400});let p=new d.A({title:t,description:r||"",embedUrl:s,category:a,status:i||"draft",featured:o||!1,thumbnailUrl:c||"",duration:l||""});return await p.save(),n.NextResponse.json({success:!0,data:p,message:"Media item created successfully"})}catch(e){return console.error("Error creating media item:",e),n.NextResponse.json({success:!1,error:"Failed to create media item"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/media/route",pathname:"/api/media",filename:"route",bundlePath:"app/api/media/route"},resolvedPagePath:"D:\\code\\shakti-sabha\\latest\\ShaktiSabha\\src\\app\\api\\media\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:g,serverHooks:h}=p;function y(){return(0,o.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:g})}},96487:()=>{},78335:()=>{},37236:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(56037),a=r.n(s);let i=process.env.MONGODB_URI||"mongodb://localhost:27017/shakti-sabha";if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=async function(){if(!(a().connection.readyState>=1))try{await a().connect(i,{maxPoolSize:10,minPoolSize:2,socketTimeoutMS:45e3,serverSelectionTimeoutMS:5e3,retryWrites:!0,retryReads:!0}),console.log("MongoDB connected successfully")}catch(e){throw console.error("MongoDB connection error:",e),e}}},17745:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(56037),a=r.n(s);let i=new(a()).Schema({title:{type:String,required:[!0,"Title is required"],trim:!0,maxlength:[200,"Title cannot be more than 200 characters"]},description:{type:String,trim:!0,maxlength:[1e3,"Description cannot be more than 1000 characters"]},embedUrl:{type:String,required:[!0,"Embed URL is required"],validate:{validator:function(e){return/^https:\/\/(www\.)?(youtube\.com\/embed\/|youtu\.be\/)/.test(e)},message:"Please provide a valid YouTube embed URL"}},category:{type:String,required:[!0,"Category is required"],enum:["Podcast","Interview","Documentary","Workshop","Discussion","Other"],default:"Other"},status:{type:String,enum:["draft","published"],default:"draft"},views:{type:Number,default:0},featured:{type:Boolean,default:!1},thumbnailUrl:{type:String,default:""},duration:{type:String,default:""},uploadedBy:{type:String,default:"Admin User"}},{timestamps:!0});i.index({category:1,status:1,createdAt:-1}),i.index({featured:1,status:1}),i.index({title:"text",description:"text"});let o=a().models.Media||a().model("Media",i)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,5452],()=>r(65794));module.exports=s})();