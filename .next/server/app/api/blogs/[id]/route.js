(()=>{var e={};e.id=8841,e.ids=[8841],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79275:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>f,routeModule:()=>g,serverHooks:()=>h,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>m});var o={};r.r(o),r.d(o,{DELETE:()=>p,GET:()=>d,PUT:()=>c});var s=r(42706),n=r(28203),a=r(45994),i=r(39187),u=r(37236),l=r(8353);async function d(e,{params:t}){try{await (0,u.A)();let{id:e}=await t,r=await l.A.findById(e);if(!r)return i.NextResponse.json({error:"Blog not found"},{status:404});return r.views+=1,await r.save(),i.NextResponse.json(r)}catch(e){return console.error("Get blog error:",e),i.NextResponse.json({error:"Failed to get blog"},{status:500})}}async function c(e,{params:t}){try{await (0,u.A)();let{id:r}=await t,{title:o,excerpt:s,content:n,imageUrl:a,status:d}=await e.json(),c=await l.A.findByIdAndUpdate(r,{title:o,excerpt:s,content:n,imageUrl:a,status:d},{new:!0,runValidators:!0});if(!c)return i.NextResponse.json({error:"Blog not found"},{status:404});return i.NextResponse.json(c)}catch(e){return console.error("Update blog error:",e),i.NextResponse.json({error:"Failed to update blog"},{status:500})}}async function p(e,{params:t}){try{await (0,u.A)();let{id:e}=await t;if(!await l.A.findByIdAndDelete(e))return i.NextResponse.json({error:"Blog not found"},{status:404});return i.NextResponse.json({message:"Blog deleted successfully"})}catch(e){return console.error("Delete blog error:",e),i.NextResponse.json({error:"Failed to delete blog"},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/blogs/[id]/route",pathname:"/api/blogs/[id]",filename:"route",bundlePath:"app/api/blogs/[id]/route"},resolvedPagePath:"D:\\code\\shakti-sabha\\latest\\ShaktiSabha\\src\\app\\api\\blogs\\[id]\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:x,workUnitAsyncStorage:m,serverHooks:h}=g;function f(){return(0,a.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:m})}},96487:()=>{},78335:()=>{},37236:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(56037),s=r.n(o);let n=process.env.MONGODB_URI||"mongodb://localhost:27017/shakti-sabha";if(!n)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=async function(){if(!(s().connection.readyState>=1))try{await s().connect(n,{maxPoolSize:10,minPoolSize:2,socketTimeoutMS:45e3,serverSelectionTimeoutMS:5e3,retryWrites:!0,retryReads:!0}),console.log("MongoDB connected successfully")}catch(e){throw console.error("MongoDB connection error:",e),e}}},8353:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(56037),s=r.n(o);let n=new(s()).Schema({title:{type:String,required:[!0,"Title is required"],trim:!0,maxlength:[200,"Title cannot be more than 200 characters"]},excerpt:{type:String,required:[!0,"Excerpt is required"],trim:!0,maxlength:[500,"Excerpt cannot be more than 500 characters"]},content:{type:String,required:[!0,"Content is required"]},imageUrl:{type:String,default:"/placeholder-blog.svg"},author:{type:String,default:"Admin User"},status:{type:String,enum:["draft","published"],default:"draft"},views:{type:Number,default:0}},{timestamps:!0});n.index({title:"text",excerpt:"text"}),n.index({status:1,createdAt:-1});let a=s().models.Blog||s().model("Blog",n)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,5452],()=>r(79275));module.exports=o})();