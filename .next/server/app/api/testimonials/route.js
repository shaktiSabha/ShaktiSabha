(()=>{var e={};e.id=9210,e.ids=[9210],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},49340:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>m,serverHooks:()=>h,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>g});var a={};r.r(a),r.d(a,{GET:()=>d,POST:()=>l});var n=r(42706),s=r(28203),o=r(45994),i=r(39187),c=r(37236),u=r(69590);async function d(){try{await (0,c.A)();let e=await u.A.find({}).sort({createdAt:-1});return i.NextResponse.json(e)}catch(e){return console.error("Error fetching testimonials:",e),i.NextResponse.json({error:"Failed to fetch testimonials"},{status:500})}}async function l(e){try{await (0,c.A)();let{name:t,message:r,memberSince:a,status:n="draft"}=await e.json();if(!t||!r)return i.NextResponse.json({error:"Name and message are required"},{status:400});let s=new u.A({name:t,message:r,memberSince:a||"2024",status:n,featured:!1,category:"Community"}),o=await s.save();return i.NextResponse.json(o,{status:201})}catch(e){return console.error("Create testimonial error:",e),i.NextResponse.json({error:"Failed to create testimonial"},{status:500})}}let m=new n.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/testimonials/route",pathname:"/api/testimonials",filename:"route",bundlePath:"app/api/testimonials/route"},resolvedPagePath:"D:\\code\\shakti-sabha\\latest\\ShaktiSabha\\src\\app\\api\\testimonials\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:p,workUnitAsyncStorage:g,serverHooks:h}=m;function x(){return(0,o.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:g})}},96487:()=>{},78335:()=>{},37236:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(56037),n=r.n(a);let s=process.env.MONGODB_URI||"mongodb://localhost:27017/shakti-sabha";if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=async function(){if(!(n().connection.readyState>=1))try{await n().connect(s,{maxPoolSize:10,minPoolSize:2,socketTimeoutMS:45e3,serverSelectionTimeoutMS:5e3,retryWrites:!0,retryReads:!0}),console.log("MongoDB connected successfully")}catch(e){throw console.error("MongoDB connection error:",e),e}}},69590:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(56037),n=r.n(a);let s=new(n()).Schema({name:{type:String,required:[!0,"Name is required"],trim:!0,maxlength:[100,"Name cannot be more than 100 characters"]},designation:{type:String,trim:!0,maxlength:[150,"Designation cannot be more than 150 characters"]},company:{type:String,trim:!0,maxlength:[100,"Company cannot be more than 100 characters"]},message:{type:String,required:[!0,"Message is required"],trim:!0,maxlength:[1e3,"Message cannot be more than 1000 characters"]},imageUrl:{type:String,default:"/placeholder-testimonial.svg"},imagePublicId:{type:String,default:""},location:{type:String,trim:!0,maxlength:[100,"Location cannot be more than 100 characters"]},memberSince:{type:String,default:"2024"},status:{type:String,enum:["draft","published"],default:"draft"},featured:{type:Boolean,default:!1},category:{type:String,enum:["Workshop","Training","Community","Counseling","Other"],default:"Other"},addedBy:{type:String,default:"Admin User"}},{timestamps:!0});s.index({status:1,createdAt:-1}),s.index({featured:1,status:1}),s.index({category:1,status:1}),s.index({name:"text",message:"text"});let o=n().models.Testimonial||n().model("Testimonial",s)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,5452],()=>r(49340));module.exports=a})();