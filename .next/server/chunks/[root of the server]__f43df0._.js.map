{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/shakti-sabha/latest/ShaktiSabha/src/lib/mongodb.ts"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/shakti-sabha';\r\n\r\nif (!MONGODB_URI) {\r\n  throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\r\n}\r\n\r\n// Use mongoose connection state instead of custom flag\r\nasync function connectDB() {\r\n  // Check if already connected (0 = disconnected, 1 = connected, 2 = connecting, 3 = disconnecting)\r\n  if (mongoose.connection.readyState >= 1) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await mongoose.connect(MONGODB_URI, {\r\n      // Connection pool settings to prevent ECONNRESET\r\n      maxPoolSize: 10,\r\n      minPoolSize: 2,\r\n      socketTimeoutMS: 45000,\r\n      serverSelectionTimeoutMS: 5000,\r\n      // Prevent connection issues\r\n      retryWrites: true,\r\n      retryReads: true,\r\n    });\r\n    console.log('MongoDB connected successfully');\r\n  } catch (error) {\r\n    console.error('MongoDB connection error:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport default connectDB; "],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAE/C,uCAAkB;;AAElB;AAEA,uDAAuD;AACvD,eAAe;IACb,kGAAkG;IAClG,IAAI,yGAAA,CAAA,UAAQ,CAAC,UAAU,CAAC,UAAU,IAAI,GAAG;QACvC;IACF;IAEA,IAAI;QACF,MAAM,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,aAAa;YAClC,iDAAiD;YACjD,aAAa;YACb,aAAa;YACb,iBAAiB;YACjB,0BAA0B;YAC1B,4BAA4B;YAC5B,aAAa;YACb,YAAY;QACd;QACA,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,MAAM;IACR;AACF;uCAEe"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/shakti-sabha/latest/ShaktiSabha/src/models/Blog.ts"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst blogSchema = new mongoose.Schema({\r\n  title: {\r\n    type: String,\r\n    required: [true, 'Title is required'],\r\n    trim: true,\r\n    maxlength: [200, 'Title cannot be more than 200 characters']\r\n  },\r\n  excerpt: {\r\n    type: String,\r\n    required: [true, 'Excerpt is required'],\r\n    trim: true,\r\n    maxlength: [500, 'Excerpt cannot be more than 500 characters']\r\n  },\r\n  content: {\r\n    type: String,\r\n    required: [true, 'Content is required']\r\n  },\r\n  imageUrl: {\r\n    type: String,\r\n    default: '/placeholder-blog.svg'\r\n  },\r\n  author: {\r\n    type: String,\r\n    default: 'Admin User'\r\n  },\r\n  status: {\r\n    type: String,\r\n    enum: ['draft', 'published'],\r\n    default: 'draft'\r\n  },\r\n  views: {\r\n    type: Number,\r\n    default: 0\r\n  }\r\n}, {\r\n  timestamps: true // This adds createdAt and updatedAt fields automatically\r\n});\r\n\r\n// Create indexes for better performance\r\nblogSchema.index({ title: 'text', excerpt: 'text' });\r\nblogSchema.index({ status: 1, createdAt: -1 });\r\n\r\nconst Blog = mongoose.models.Blog || mongoose.model('Blog', blogSchema);\r\n\r\nexport default Blog; "],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,aAAa,IAAI,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC;IACrC,OAAO;QACL,MAAM;QACN,UAAU;YAAC;YAAM;SAAoB;QACrC,MAAM;QACN,WAAW;YAAC;YAAK;SAA2C;IAC9D;IACA,SAAS;QACP,MAAM;QACN,UAAU;YAAC;YAAM;SAAsB;QACvC,MAAM;QACN,WAAW;YAAC;YAAK;SAA6C;IAChE;IACA,SAAS;QACP,MAAM;QACN,UAAU;YAAC;YAAM;SAAsB;IACzC;IACA,UAAU;QACR,MAAM;QACN,SAAS;IACX;IACA,QAAQ;QACN,MAAM;QACN,SAAS;IACX;IACA,QAAQ;QACN,MAAM;QACN,MAAM;YAAC;YAAS;SAAY;QAC5B,SAAS;IACX;IACA,OAAO;QACL,MAAM;QACN,SAAS;IACX;AACF,GAAG;IACD,YAAY,KAAK,yDAAyD;AAC5E;AAEA,wCAAwC;AACxC,WAAW,KAAK,CAAC;IAAE,OAAO;IAAQ,SAAS;AAAO;AAClD,WAAW,KAAK,CAAC;IAAE,QAAQ;IAAG,WAAW,CAAC;AAAE;AAE5C,MAAM,OAAO,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAC,QAAQ;uCAE7C"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/shakti-sabha/latest/ShaktiSabha/src/app/api/blogs/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport connectDB from '@/lib/mongodb';\r\nimport Blog from '@/models/Blog';\r\n\r\nexport async function GET() {\r\n  try {\r\n    await connectDB();\r\n    const blogs = await Blog.find({}).sort({ createdAt: -1 });\r\n    return NextResponse.json(blogs);\r\n  } catch (error) {\r\n    console.error('Error fetching blogs:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch blogs' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    await connectDB();\r\n    const body = await request.json();\r\n    const { title, excerpt, content, imageUrl, status = 'draft' } = body;\r\n\r\n    if (!title || !excerpt || !content) {\r\n      return NextResponse.json(\r\n        { error: 'Title, excerpt, and content are required' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const newBlog = new Blog({\r\n      title,\r\n      excerpt,\r\n      content,\r\n      imageUrl: imageUrl || '/placeholder-blog.svg',\r\n      author: 'Admin User',\r\n      status\r\n    });\r\n\r\n    const savedBlog = await newBlog.save();\r\n    return NextResponse.json(savedBlog, { status: 201 });\r\n  } catch (error) {\r\n    console.error('Create blog error:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to create blog' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n} "],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,CAAA,GAAA,uHAAA,CAAA,UAAS,AAAD;QACd,MAAM,QAAQ,MAAM,uHAAA,CAAA,UAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE;QACvD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,CAAA,GAAA,uHAAA,CAAA,UAAS,AAAD;QACd,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,OAAO,EAAE,GAAG;QAEhE,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,SAAS;YAClC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA2C,GACpD;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,UAAU,IAAI,uHAAA,CAAA,UAAI,CAAC;YACvB;YACA;YACA;YACA,UAAU,YAAY;YACtB,QAAQ;YACR;QACF;QAEA,MAAM,YAAY,MAAM,QAAQ,IAAI;QACpC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,WAAW;YAAE,QAAQ;QAAI;IACpD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}