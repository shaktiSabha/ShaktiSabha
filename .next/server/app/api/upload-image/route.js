(()=>{var e={};e.id=5893,e.ids=[5893],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11723:e=>{"use strict";e.exports=require("querystring")},27910:e=>{"use strict";e.exports=require("stream")},79551:e=>{"use strict";e.exports=require("url")},63863:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>x,routeModule:()=>l,serverHooks:()=>g,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>d});var s={};t.r(s),t.d(s,{POST:()=>p});var o=t(42706),a=t(28203),i=t(45994),n=t(39187),u=t(97873);async function p(e){try{if(!process.env.CLOUDINARY_API_KEY||!process.env.CLOUDINARY_API_SECRET)return console.error("Missing Cloudinary configuration"),n.NextResponse.json({error:"Server configuration error: Missing Cloudinary credentials"},{status:500});let r=await e.formData(),t=r.get("file"),s=r.get("folder")||"shakti-sabha-blogs";if(!t)return n.NextResponse.json({error:"No file provided"},{status:400});if(!t.type.startsWith("image/"))return n.NextResponse.json({error:"File must be an image"},{status:400});if(t.size>0xa00000)return n.NextResponse.json({error:"File size must be less than 10MB"},{status:400});console.log(`Uploading file: ${t.name}, size: ${t.size} bytes, type: ${t.type}`);let o=await t.arrayBuffer(),a=Buffer.from(o),i=await new Promise((e,r)=>{u.v2.uploader.upload_stream({resource_type:"auto",folder:s,transformation:"shakti-sabha-gallery"===s?[{width:1200,height:800,crop:"fill",quality:"auto"}]:void 0},(t,s)=>{t?(console.error("Cloudinary upload error:",t),r(t)):(console.log("Upload successful:",s?.public_id),e(s))}).end(a)});return n.NextResponse.json({imageUrl:i.secure_url,publicId:i.public_id})}catch(t){console.error("Upload error:",t);let e="Failed to upload image",r=t instanceof Error?t.message:"Unknown error";return t instanceof Error&&t.message&&(e+=`: ${t.message}`),"object"==typeof t&&null!==t&&"http_code"in t&&(e+=` (HTTP ${t.http_code})`),n.NextResponse.json({error:e,details:r},{status:500})}}u.v2.config({cloud_name:"dvsqie2oh",api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET});let l=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/upload-image/route",pathname:"/api/upload-image",filename:"route",bundlePath:"app/api/upload-image/route"},resolvedPagePath:"D:\\code\\shakti-sabha\\latest\\ShaktiSabha\\src\\app\\api\\upload-image\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:c,workUnitAsyncStorage:d,serverHooks:g}=l;function x(){return(0,i.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:d})}},96487:()=>{},78335:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,5452,7873],()=>t(63863));module.exports=s})();