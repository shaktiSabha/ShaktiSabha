(()=>{var e={};e.id=49,e.ids=[49],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},36860:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>h,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{GET:()=>l,POST:()=>d});var o=r(42706),n=r(28203),a=r(45994),i=r(39187),c=r(37236),u=r(8353);async function l(){try{await (0,c.A)();let e=await u.A.find({}).sort({createdAt:-1});return i.NextResponse.json(e)}catch(e){return console.error("Error fetching blogs:",e),i.NextResponse.json({error:"Failed to fetch blogs"},{status:500})}}async function d(e){try{await (0,c.A)();let{title:t,excerpt:r,content:s,imageUrl:o,status:n="draft"}=await e.json();if(!t||!r||!s)return i.NextResponse.json({error:"Title, excerpt, and content are required"},{status:400});let a=new u.A({title:t,excerpt:r,content:s,imageUrl:o||"/placeholder-blog.svg",author:"Admin User",status:n}),l=await a.save();return i.NextResponse.json(l,{status:201})}catch(e){return console.error("Create blog error:",e),i.NextResponse.json({error:"Failed to create blog"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/blogs/route",pathname:"/api/blogs",filename:"route",bundlePath:"app/api/blogs/route"},resolvedPagePath:"D:\\code\\shakti-sabha\\latest\\ShaktiSabha\\src\\app\\api\\blogs\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:x,serverHooks:h}=p;function m(){return(0,a.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:x})}},96487:()=>{},78335:()=>{},37236:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(56037),o=r.n(s);let n=process.env.MONGODB_URI||"mongodb://localhost:27017/shakti-sabha";if(!n)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=async function(){if(!(o().connection.readyState>=1))try{await o().connect(n,{maxPoolSize:10,minPoolSize:2,socketTimeoutMS:45e3,serverSelectionTimeoutMS:5e3,retryWrites:!0,retryReads:!0}),console.log("MongoDB connected successfully")}catch(e){throw console.error("MongoDB connection error:",e),e}}},8353:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(56037),o=r.n(s);let n=new(o()).Schema({title:{type:String,required:[!0,"Title is required"],trim:!0,maxlength:[200,"Title cannot be more than 200 characters"]},excerpt:{type:String,required:[!0,"Excerpt is required"],trim:!0,maxlength:[500,"Excerpt cannot be more than 500 characters"]},content:{type:String,required:[!0,"Content is required"]},imageUrl:{type:String,default:"/placeholder-blog.svg"},author:{type:String,default:"Admin User"},status:{type:String,enum:["draft","published"],default:"draft"},views:{type:Number,default:0}},{timestamps:!0});n.index({title:"text",excerpt:"text"}),n.index({status:1,createdAt:-1});let a=o().models.Blog||o().model("Blog",n)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,5452],()=>r(36860));module.exports=s})();