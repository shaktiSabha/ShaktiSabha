(()=>{var e={};e.id=5724,e.ids=[5724],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},43957:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>h,routeModule:()=>p,serverHooks:()=>y,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>d});var a=r(42706),i=r(28203),n=r(45994),o=r(39187),u=r(37236),l=r(70831);async function c(e){try{await (0,u.A)();let{searchParams:t}=new URL(e.url),r=t.get("category"),s=t.get("status"),a=t.get("featured"),i=parseInt(t.get("limit")||"0"),n={};r&&"All"!==r&&(n.category=r),s&&"all"!==s?n.status=s:s||(n.status="published"),"true"===a&&(n.featured=!0);let c=l.A.find(n).sort({createdAt:-1});i>0&&(c=c.limit(i));let d=await c.exec();return o.NextResponse.json({success:!0,data:d,count:d.length})}catch(e){return console.error("Error fetching galleries:",e),o.NextResponse.json({success:!1,error:"Failed to fetch galleries"},{status:500})}}async function d(e){try{await (0,u.A)();let{title:t,description:r,imageUrl:s,imagePublicId:a,category:i,alt:n,status:c,featured:d}=await e.json();if(!t||!r||!s||!a||!i||!n)return o.NextResponse.json({success:!1,error:"Missing required fields"},{status:400});let p=new l.A({title:t,description:r,imageUrl:s,imagePublicId:a,category:i,alt:n,status:c||"draft",featured:d||!1});return await p.save(),o.NextResponse.json({success:!0,data:p,message:"Gallery item created successfully"})}catch(e){return console.error("Error creating gallery item:",e),o.NextResponse.json({success:!1,error:"Failed to create gallery item"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/gallery/route",pathname:"/api/gallery",filename:"route",bundlePath:"app/api/gallery/route"},resolvedPagePath:"D:\\code\\shakti-sabha\\latest\\ShaktiSabha\\src\\app\\api\\gallery\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:m,serverHooks:y}=p;function h(){return(0,n.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:m})}},96487:()=>{},78335:()=>{},37236:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(56037),a=r.n(s);let i=process.env.MONGODB_URI||"mongodb://localhost:27017/shakti-sabha";if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let n=async function(){if(!(a().connection.readyState>=1))try{await a().connect(i,{maxPoolSize:10,minPoolSize:2,socketTimeoutMS:45e3,serverSelectionTimeoutMS:5e3,retryWrites:!0,retryReads:!0}),console.log("MongoDB connected successfully")}catch(e){throw console.error("MongoDB connection error:",e),e}}},70831:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(56037),a=r.n(s);let i=new(a()).Schema({title:{type:String,required:[!0,"Title is required"],trim:!0,maxlength:[200,"Title cannot be more than 200 characters"]},description:{type:String,required:[!0,"Description is required"],trim:!0,maxlength:[1e3,"Description cannot be more than 1000 characters"]},imageUrl:{type:String,required:[!0,"Image URL is required"]},imagePublicId:{type:String,required:!0},category:{type:String,required:[!0,"Category is required"],enum:["Workshops","Community","Training","Events","Conferences","Other"],default:"Other"},alt:{type:String,required:[!0,"Alt text is required for accessibility"],trim:!0,maxlength:[200,"Alt text cannot be more than 200 characters"]},status:{type:String,enum:["draft","published"],default:"draft"},views:{type:Number,default:0},featured:{type:Boolean,default:!1},uploadedBy:{type:String,default:"Admin User"}},{timestamps:!0});i.index({category:1,status:1,createdAt:-1}),i.index({featured:1,status:1}),i.index({title:"text",description:"text"});let n=a().models.Gallery||a().model("Gallery",i)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,5452],()=>r(43957));module.exports=s})();